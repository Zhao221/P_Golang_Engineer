# **OSI七层模型及其作用**

OSI（Open Systems Interconnection）七层模型是一个用于描述网络协议和通信的概念模型。它将网络通信过程分为七个层次，从低层到高层依次是：物理层、数据链路层、网络层、传输层、会话层、表示层和应用层。下面是每一层的作用简介：

1. **物理层（Physical Layer）**：物理层负责在不同设备之间传输比特流（0和1）。它处理物理连接的建立、维护和断开，包括电气特性、机械特性和时序特性等。常见的物理层设备有集线器（Hub）、中继器（Repeater）等，常见的物理层协议有电缆标准（如Ethernet、Token Ring等）。

2. **数据链路层（Data Link Layer）**：数据链路层将比特流组织成帧（Frame），并负责在相邻设备之间进行点对点的数据传输。它提供了数据的透明传输、错误检测和流量控制等功能。常见的数据链路层设备有网桥（Bridge）、交换机（Switch）等，常见的数据链路层协议有MAC（媒体访问控制）、LLC（逻辑链路控制）等。

3. **网络层（Network Layer）**：网络层负责处理数据包的路由和转发，即确定数据包从源到目的地的路径。它提供了逻辑地址（如IP地址）和网络互连等功能。常见的网络层设备有路由器（Router），常见的网络层协议有IP（互联网协议）、ICMP（互联网控制报文协议）、IGMP（互联网组管理协议）等。

4. **传输层（Transport Layer）**：传输层负责在端系统之间提供可靠或不可靠的数据传输服务。它提供了端到端的数据传输、错误检测和恢复、流量控制等功能。常见的传输层协议有TCP（传输控制协议）、UDP（用户数据报协议）等。

5. **会话层（Session Layer）**：会话层负责在通信双方之间建立、维护和断开会话。会话层提供了双工、半双工或单工通信等功能。会话层协议有RPC（远程过程调用）、SQL（结构化查询语言）等。

6. **表示层（Presentation Layer）**：表示层负责处理数据的表示、编码和解码。它将应用层数据转换为网络可传输的格式，以确保数据在发送端和接收端之间的一致性。表示层协议有ASN.1（抽象语法表示）、MIME（多用途互联网邮件扩展）等。

7. **应用层（Application Layer）**：应用层是用户与网络应用程序交互的接口，负责处理应用程序之间的通信。应用层协议有HTTP（超文本传输协议）、FTP（文件传输协议）、SMTP（简单邮件传输协议）、DNS（域名系统）等。

OSI七层模型可以帮助理解网络通信的不同阶段，并在各个层次上实现不同功能，使得网络协议和设备能够相互协同工作。

# **五层模型**

五层模型（也称为TCP/IP模型）是另一种用于描述网络协议和通信过程的概念模型。相较于OSI七层模型，五层模型将网络通信过程简化为5个层次。从低层到高层依次是：物理层、数据链路层、网络层、传输层和应用层。下面是每一层的作用简介：

1. **物理层（Physical Layer）**：与OSI七层模型中的物理层相同，负责在不同设备之间传输比特流（0和1）。它处理物理连接的建立、维护和断开，包括电气特性、机械特性和时序特性等。

2. **数据链路层（Data Link Layer）**：与OSI七层模型中的数据链路层相同，将比特流组织成帧（Frame），并负责在相邻设备之间进行点对点的数据传输。它提供了数据的透明传输、错误检测和流量控制等功能。

3. **网络层（Network Layer）**：与OSI七层模型中的网络层相同，负责处理数据包的路由和转发，即确定数据包从源到目的地的路径。它提供了逻辑地址（如IP地址）和网络互连等功能。

4. **传输层（Transport Layer）**：与OSI七层模型中的传输层相同，负责在端系统之间提供可靠或不可靠的数据传输服务。它提供了端到端的数据传输、错误检测和恢复、流量控制等功能。

5. **应用层（Application Layer）**：五层模型的应用层包含了OSI七层模型中的会话层、表示层和应用层。它负责处理应用程序之间的通信，数据的表示、编码和解码，以及会话的建立、维护和断开等功能。

五层模型相对于OSI七层模型更加简洁，它将OSI模型中的会话层、表示层和应用层合并为一个统一的应用层，更加符合实际的网络协议和设备的工作方式。

# **TCP/IP四层模型**

TCP/IP四层模型是一个用于描述网络协议和通信过程的概念模型。它是基于TCP/IP协议簇设计的，相较于OSI七层模型和五层模型，TCP/IP模型进一步简化了网络通信过程。从低层到高层依次是：网络接口层、网络层、传输层和应用层。下面是每一层的作用简介：

1. **网络接口层（Network Interface Layer）**：网络接口层对应了OSI模型中的物理层和数据链路层。它负责将数据帧在网络设备之间进行传输，处理物理连接的建立、维护和断开，以及数据的透明传输、错误检测和流量控制等功能。

2. **网络层（Network Layer）**：与OSI模型和五层模型中的网络层相同，负责处理数据包的路由和转发，即确定数据包从源到目的地的路径。它提供了逻辑地址（如IP地址）和网络互连等功能。常见的网络层协议有IP（互联网协议）、ICMP（互联网控制报文协议）、IGMP（互联网组管理协议）等。

3. **传输层（Transport Layer）**：与OSI模型和五层模型中的传输层相同，负责在端系统之间提供可靠或不可靠的数据传输服务。它提供了端到端的数据传输、错误检测和恢复、流量控制等功能。常见的传输层协议有TCP（传输控制协议）、UDP（用户数据报协议）等。

4. **应用层（Application Layer）**：TCP/IP模型的应用层包含了OSI模型中的会话层、表示层和应用层。它负责处理应用程序之间的通信，数据的表示、编码和解码，以及会话的建立、维护和断开等功能。常见的应用层协议有HTTP（超文本传输协议）、FTP（文件传输协议）、SMTP（简单邮件传输协议）、DNS（域名系统）等。

TCP/IP四层模型以实际应用为基础，将网络通信过程进一步简化，使得网络协议和设备能够更有效地协同工作。

# **键入网址到网页显示，期间发生了什么？**

当你在浏览器中输入网址并按下回车键后，从输入网址到页面显示，整个过程涉及到多个步骤。以下是一个简化的概述：

1. **域名解析（DNS查询）**：首先，浏览器需要将输入的域名解析为服务器的IP地址。这个过程由DNS（域名系统）完成。浏览器会向本地或配置的DNS服务器发送查询请求，DNS服务器会逐级查询，找到对应的IP地址后返回给浏览器。

   缓存-操作系统-hosts文件-本地DNS服务器--》根域名服务器--〉顶级域名服务器--》权威DNS服务器

2. **建立连接（TCP三次握手）**：浏览器获取到目标服务器的IP地址后，会尝试通过TCP协议与服务器建立连接。这个过程通常包括“三次握手”：
   - 浏览器向服务器发送一个SYN（同步）报文；
   - 服务器收到SYN报文后，返回一个SYN+ACK（确认）报文；
   - 浏览器收到SYN+ACK报文后，再发送一个ACK报文。

   当三次握手成功完成后，浏览器与服务器之间建立了TCP连接。

3. **发送HTTP请求**：TCP连接建立后，浏览器会通过该连接向服务器发送一个HTTP请求。这个请求包含了请求方法（如GET或POST）、请求路径（如`/index.html`）、HTTP版本（如HTTP/1.1）以及其他请求头信息（如User-Agent、Accept等）。

4. **服务器处理请求**：服务器接收到浏览器的HTTP请求后，会根据请求信息处理并生成一个HTTP响应。这个响应包含了响应状态码（如200表示成功），响应头信息（如Content-Type、Content-Length等）以及响应主体（通常是HTML文档）。

5. **接收并显示页面**：浏览器接收到服务器的HTTP响应后，会解析响应头信息和HTML文档。然后，浏览器会根据HTML文档中的CSS和JavaScript文件，再次发起请求以获取这些资源。最后，浏览器根据HTML、CSS和JavaScript渲染页面并显示给用户。

6. **断开连接（TCP四次挥手）**：页面显示完成后，浏览器和服务器会通过TCP四次挥手过程关闭TCP连接。具体过程如下：
   - 浏览器发送一个FIN（结束）报文给服务器；
   - 服务器收到FIN报文后，发送一个ACK报文给浏览器；
   - 服务器发送一个FIN报文给浏览器；
   - 浏览器收到FIN报文后，发送一个ACK报文给服务器。

   当四次挥手成功完成后，TCP连接关闭。

以上就是从键入网址到网页显示所经历的过程。实际上，这个过程涉及到许多细节和异常处理，但这里只列出了主要步骤。

# cookie和session是什么，有什么区别？

Cookie和Session是用于在Web应用程序中存储和跟踪用户状态的机制。

**Cookie**

Cookie是由服务器发送到客户端（通常是浏览器）的一小段数据，客户端会存储这些数据，并在后续的请求中将其发送回服务器。服务器可以通过检查这些Cookie来识别用户。

Cookie的底层实现：

1. 当客户端首次访问服务器时，服务器可以在HTTP响应头中设置一个或多个Cookie。
2. 客户端（浏览器）接收到这些Cookie后，会将其存储在本地（可能是内存或磁盘上）。
3. 当客户端再次向服务器发送请求时，它会在HTTP请求头中包含这些Cookie。
4. 服务器接收到请求后，可以检查HTTP请求头中的Cookie，以识别用户或获取其他相关信息。

**Session**

Session是一种在服务器端跟踪用户会话的机制。服务器为每个用户会话创建一个唯一的会话标识符（Session ID），并将其发送给客户端。客户端在后续的请求中包含这个会话标识符，以便服务器能够识别用户。

Session的底层实现：

1. 当客户端首次访问服务器时，服务器会创建一个新的会话，并为其分配一个唯一的会话标识符（Session ID）。
2. 服务器将这个会话标识符存储在服务器的内存中（或数据库等其他存储介质上）。
3. 服务器将会话标识符发送给客户端，通常是通过Cookie或URL重写的方式。
4. 客户端在后续的请求中包含这个会话标识符，可能是通过Cookie或作为请求参数。
5. 服务器接收到请求后，检查会话标识符，并在服务器端查找对应的会话数据，以识别用户或获取其他相关信息。

Cookie是一小段存储在用户计算机上的数据。当用户访问一个网站时，服务器可以将一个或多个Cookie发送到用户的浏览器中。浏览器会将这些Cookie存储在本地，并在用户下一次访问该网站时将它们发送回服务器。Cookie通常用于存储有关用户的身份验证信息、偏好设置和其他与用户相关的数据。

Session是一种在服务器端存储用户状态的机制。当用户访问一个网站时，服务器会创建一个唯一的会话ID，并将其发送到用户的浏览器。浏览器将会话ID保存在Cookie中，或者通过URL参数将其附加到每个请求中。服务器使用会话ID来识别每个用户，并将相关的数据存储在服务器上的会话存储中。会话存储可以是内存、数据库或其他持久化存储。

区别：
1. 存储位置：Cookie存储在用户的浏览器中，而Session存储在服务器端。
2. 安全性：由于Cookie存储在用户的计算机上，所以可能存在安全风险，例如被恶意软件获取或被篡改。而Session存储在服务器上，相对更安全。
3. 存储容量：Cookie的存储容量较小，通常只能存储少量数据（4KB左右），而Session可以存储更大的数据，因为它存储在服务器上。
4. 生命周期：Cookie可以设置一个过期时间，可以长期保存在用户的计算机上，即使关闭浏览器也可以保留。而Session通常在用户关闭浏览器时结束，或者在一段时间内没有活动后过期。

在实际应用中，Cookie通常用于存储用户的身份验证信息，而Session用于存储用户的会话数据，例如购物车内容、用户设置等。一般来说，Cookie用于跟踪用户的长期状态，而Session用于跟踪用户的短期状态。

# 粘包拆包

在计算机网络中，粘包（Packet Sticking）和拆包（Packet Splitting）是指在数据传输过程中由于底层传输协议的特性或应用程序设计不当，导致接收端无法准确地按照发送端发送的数据包边界进行解析。

**粘包**是指多个数据包粘在一起发送或接收的情况，而接收端可能无法准确地区分各个数据包的边界。这可能发生在底层的传输协议中，如 TCP 协议是面向流的，它将应用层的数据流分割成一系列的数据段进行传输，因此接收端可能会收到多个数据段合并在一起的情况，形成粘包。

**拆包**是指一个数据包被分割成多个部分进行发送，而接收端需要将这些部分重新组装成完整的数据包。这可能发生在应用程序设计或网络传输过程中，例如，发送端将一个较大的数据包分割成多个小的数据段进行发送，接收端需要解析并将这些数据段组合成完整的数据包。

粘包和拆包的出现主要是由于数据的传输底层使用的是面向流的传输协议，而应用程序通常是面向消息的。为了解决粘包和拆包的问题，可以采取以下一些常见的方法：

1. **固定长度分割**：发送端将数据按照固定的长度进行分割，接收端按照相同的长度进行接收和解析，确保每个数据包的长度固定。

2. **特殊字符分割**：发送端在数据包之间添加特殊的分隔符，接收端根据分隔符将数据分割成多个数据包进行处理。例如，在每个数据包的末尾添加换行符或其他特殊字符作为分隔符。

3. **长度字段标识**：发送端在每个数据包的头部添加一个固定长度的字段，用于表示该数据包的长度。接收端首先读取长度字段，然后根据长度字段的值读取相应长度的数据，以解决粘包和拆包的问题。

4. **应用层协议设计**：在应用层协议中定义明确的消息格式，包括消息头和消息体等，以确保发送端和接收端能够准确地解析和处理消息。

