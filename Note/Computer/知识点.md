# 基础

## OSI七层网络模型

1. 应用层：产生数据
2. 表示层：对应用层来的数据进行压缩，解压缩，加密解
3. 会话层：数据传输之前建立一个会话，传输过程中维持一个会话，传输结束终止这个会话
4. 传输层：标明上层是哪些应用程序（流控）
5. 网络层：寻址，源IP地址，目的地址，协议类型
6. 数据链路层：承上启下，源MAC地址，目的MAC地址，上层协议类型
7. 物理层：定义一些设备的接口以及传输速率

## TCP/IP四层网络模型

1. 应用层：为操作系统或应用程序提供访问应用的接口，基本单位为报文

2. 传输层：提供端对端的数据传输（网关）

   网关：为局域网内用户提供了一扇门，通过该门可以访问到别的网络，路由器的每个接口都代表一个不同的网络

3. 网络层：路由选择，基本单位为IP数据报（路由器）

4. 网络接口层：

   - 数据链路层：为网络层提供可靠的数据传输，基本单位为帧，主要协议为以太网协议（网桥、交换机）
   - 物理层：确保原始数据可在各种物理媒体上传输（中继器、集线器）

## IP地址

### IP地址类型

1. 网络地址：IP地址由网络号和主机号组成，网络地址的主机号全为0，网络地址代表整个网络
2. 广播地址：广播地址通常称为直接广播地址，是为了区分受限广播地址，广播地址的主机号全为1，向广播地址发送消息将广播给网络内所有主机
3. 组播地址：D类地址就是组播地址

### 私有地址

1. A类私有地址：10.0.0.0~10.255.255.255
2. B类私有地址：172.16.0.0~172.31.255.255
3. C类私有地址：192.168.0.0~192.168.255.255

### 子网掩码

1. 用来分割子网和区分哪些是同一网段的
2. 子网划分：减少子网掩码长度，合并多个网络；增加子网掩码长度，将一个网络切成多个网络
3. 无类域间路由：CIRD基于可变长子网掩码，使网络分配更加灵活

## 设备

### 交换机（数据链路层）

* **描述**

维护MAC地址表，隔离冲突域，寻址和进行数据转发，交换机会把广播、组播和未知单播帧从所有其他端口发送出去（除了发送帧的端口）

* **工作流程**

1. ARP解析：如果发送方不知道目标设备的MAC地址，它将首先使用ARP协议来解析目标设备的MAC地址，它会广播ARP请求，目标设备回复自己的MAC地址
2. 帧封装：发送方知道目标设备MAC后，将IP报文封装到一个数据帧中，数据帧包括源MAC地址，目的MAC地址，帧类型和数据部分
3. MAC地址表查询；当交换机收到数据帧后，它会查询自己的MAC地址表，查找目标MAC地址对应的接口
4. 转发数据帧：如果交换机能够找到目标MAC地址对应的接口，则从此接口发送，构否则广播到所有接口
5. MAC地址学习：当一个端口接收到一个数据帧时，交换机会检查源MAC地址，并更新其MAC地址表

### 路由器(工作过程)

1. 主机将数据包发送给TCP层，TCP将数据分成多个数据端，并为每个数据段添加TCP头
2. TCP层将数据段传递给IP层，IP层将数据段封装成IP数据报，并在数据报头中添加源IP地址和目标IP地址
3. 如果目标主机不在同一子网中，IP层需要将数据包发送给默认网关，此时，IP层将使用ARP协议获取网关的MAC地址
4. 如果ARP缓存中不存在网关的MAC地址，则主机将会向本地网络所有主机发送ARP请求
5. 源主机接收到ARP响应后，将使用网关的MAC地址封装IP数据报，并将其发送给网关，跨网段通信，其他网段IP地址的MAC地址均为网关MAC地址
6. 网关接收到数据包，根据目标IP地址查找路由表，将源MAC地址设置为入口接口的MAC地址，目的MAC地址设置为下一跳的MAC地址，并将数据包转发出去MAC地址是一个局域网内才有效的地址，因而，MAC地址只要过网关，就必定会改变，因为已经换了局域网

### 集线器

1. 信号放大，解决往下只能短距离传输问题
2. 无脑广播，从一个接口收到数据会从所有其他接口发送出去
3. 半双工，同一时间只能接收或发送数据，会使网络造成冲突，所波及的范围叫做冲突域
4. 无线AP就是hub

# 协议

