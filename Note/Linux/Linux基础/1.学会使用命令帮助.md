# 0.å­¦ä¼šä½¿ç”¨å‘½ä»¤å¸®åŠ©

## 1.1æ¦‚è¿°

åœ¨linuxç»ˆç«¯ï¼Œé¢å¯¹å‘½ä»¤ä¸çŸ¥é“æ€ä¹ˆç”¨ï¼Œæˆ–ä¸è®°å¾—å‘½ä»¤çš„æ‹¼å†™åŠå‚æ•°æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ±‚åŠ©äºç³»ç»Ÿçš„å¸®åŠ©æ–‡æ¡£ï¼›linuxç³»ç»Ÿå†…ç½®çš„å¸®åŠ©æ–‡æ¡£å¾ˆè¯¦ç»†ï¼Œé€šå¸¸èƒ½è§£å†³æˆ‘ä»¬çš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æŒæ¡å¦‚ä½•æ­£ç¡®çš„å»ä½¿ç”¨å®ƒä»¬ï¼›

- åœ¨åªè®°å¾—éƒ¨åˆ†å‘½ä»¤å…³é”®å­—çš„åœºåˆï¼Œæˆ‘ä»¬å¯é€šè¿‡`man -k`æ¥æœç´¢ï¼›
- éœ€è¦çŸ¥é“æŸä¸ªå‘½ä»¤çš„ç®€è¦è¯´æ˜ï¼Œå¯ä»¥ä½¿ç”¨`whatis`ï¼›è€Œæ›´è¯¦ç»†çš„ä»‹ç»ï¼Œåˆ™å¯ç”¨`info`å‘½ä»¤ï¼›
- æŸ¥çœ‹å‘½ä»¤åœ¨å“ªä¸ªä½ç½®ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨`which`ï¼›
- è€Œå¯¹äºå‘½ä»¤çš„å…·ä½“å‚æ•°åŠä½¿ç”¨æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°å¼ºå¤§çš„`man`ï¼›

ä¸‹é¢ä»‹ç»è¿™äº›å‘½ä»¤ï¼›

## 1.2å‘½ä»¤ä½¿ç”¨

### **æŸ¥çœ‹å‘½ä»¤çš„ç®€è¦è¯´æ˜**

ç®€è¦è¯´æ˜å‘½ä»¤çš„ä½œç”¨ï¼ˆæ˜¾ç¤ºå‘½ä»¤æ‰€å¤„çš„manåˆ†ç±»é¡µé¢ï¼‰:

```bash
- whatis command
```

æ­£åˆ™åŒ¹é…:

```
- whatis -w "loca*"
```

æ›´åŠ è¯¦ç»†çš„è¯´æ˜æ–‡æ¡£:

```bash
- info command
```

### ä½¿ç”¨man

æŸ¥è¯¢å‘½ä»¤commandçš„è¯´æ˜æ–‡æ¡£:

```sh
- man commandegï¼šman date
```

ä½¿ç”¨`page up`å’Œ`page down`æ¥ä¸Šä¸‹ç¿»é¡µ

åœ¨mançš„å¸®åŠ©æ‰‹å†Œä¸­ï¼Œå°†å¸®åŠ©æ–‡æ¡£åˆ†ä¸ºäº†9ä¸ªç±»åˆ«ï¼Œå¯¹äºæœ‰çš„å…³é”®å­—å¯èƒ½å­˜åœ¨å¤šä¸ªç±»åˆ«ä¸­ï¼Œæˆ‘ä»¬å°±éœ€è¦æŒ‡å®šç‰¹å®šçš„ç±»åˆ«æ¥æŸ¥çœ‹ï¼›ï¼ˆä¸€èˆ¬æˆ‘ä»¬æŸ¥è¯¢bashå‘½ä»¤ï¼Œå½’ç±»åœ¨1ç±»ä¸­ï¼‰ï¼›

mané¡µé¢æ‰€å±çš„åˆ†ç±»æ ‡è¯†(å¸¸ç”¨çš„æ˜¯åˆ†ç±»1å’Œåˆ†ç±»3)

(1)ã€ç”¨æˆ·å¯ä»¥æ“ä½œçš„å‘½ä»¤æˆ–è€…æ˜¯å¯æ‰§è¡Œæ–‡ä»¶

(2)ã€ç³»ç»Ÿæ ¸å¿ƒå¯è°ƒç”¨çš„å‡½æ•°ä¸å·¥å…·ç­‰

(3)ã€ä¸€äº›å¸¸ç”¨çš„å‡½æ•°ä¸æ•°æ®åº“

(4)ã€è®¾å¤‡æ–‡ä»¶çš„è¯´æ˜

(5)ã€è®¾ç½®æ–‡ä»¶æˆ–è€…æŸäº›æ–‡ä»¶çš„æ ¼å¼

(6)ã€æ¸¸æˆ

(7)ã€æƒ¯ä¾‹ä¸åè®®ç­‰ã€‚ä¾‹å¦‚Linuxæ ‡å‡†æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œåè®®ã€ASCâ…¡ï¼Œç ç­‰è¯´æ˜å†…å®¹

(8)ã€ç³»ç»Ÿç®¡ç†å‘˜å¯ç”¨çš„ç®¡ç†æ¡ä»¤

(9)ã€ä¸å†…æ ¸æœ‰å…³çš„æ–‡ä»¶

å‰é¢è¯´åˆ°ä½¿ç”¨whatisä¼šæ˜¾ç¤ºå‘½ä»¤æ‰€åœ¨çš„å…·ä½“çš„æ–‡æ¡£ç±»åˆ«ï¼Œæˆ‘ä»¬å­¦ä¹ å¦‚ä½•ä½¿ç”¨å®ƒ

```sh
eg:
- whatis printf
printf               (1)  - format and print data
printf               (1p)  - write formatted output
printf               (3)  - formatted output conversion
printf               (3p)  - print formatted output
printf [builtins]    (1)  - bash built-in commands, see bash(1)
```

æˆ‘ä»¬çœ‹åˆ°printfåœ¨åˆ†ç±»1å’Œåˆ†ç±»3ä¸­éƒ½æœ‰ï¼›åˆ†ç±»1ä¸­çš„é¡µé¢æ˜¯å‘½ä»¤æ“ä½œåŠå¯æ‰§è¡Œæ–‡ä»¶çš„å¸®åŠ©ï¼›è€Œ3æ˜¯å¸¸ç”¨å‡½æ•°åº“è¯´æ˜ï¼›å¦‚æœæˆ‘ä»¬æƒ³çœ‹çš„æ˜¯Cè¯­è¨€ä¸­printfçš„ç”¨æ³•ï¼Œå¯ä»¥æŒ‡å®šæŸ¥çœ‹åˆ†ç±»3çš„å¸®åŠ©ï¼š

```sh
- man 3 printf - man -k keyword
```

æŸ¥è¯¢å…³é”®å­—æ ¹æ®å‘½ä»¤ä¸­éƒ¨åˆ†å…³é”®å­—æ¥æŸ¥è¯¢å‘½ä»¤ï¼Œé€‚ç”¨äºåªè®°ä½éƒ¨åˆ†å‘½ä»¤çš„åœºåˆï¼›

egï¼šæŸ¥æ‰¾GNOMEçš„configé…ç½®å·¥å…·å‘½ä»¤:

```sh
- man -k GNOME config| grep 1
```

å¯¹äºæŸä¸ªå•è¯æœç´¢ï¼Œå¯ç›´æ¥ä½¿ç”¨/wordæ¥ä½¿ç”¨: /-a;å¤šå…³æ³¨ä¸‹SEE ALSO å¯çœ‹åˆ°æ›´å¤šç²¾å½©å†…å®¹

### **æŸ¥çœ‹è·¯å¾„**

æŸ¥çœ‹ç¨‹åºçš„binaryæ–‡ä»¶æ‰€åœ¨è·¯å¾„:

```sh
- which command
```

eg:æŸ¥æ‰¾makeç¨‹åºå®‰è£…è·¯å¾„:

```sh
- which make/opt/app/openav/soft/bin/make install
```

æŸ¥çœ‹ç¨‹åºçš„æœç´¢è·¯å¾„:

```sh
- whereis command
```

å½“ç³»ç»Ÿä¸­å®‰è£…äº†åŒä¸€è½¯ä»¶çš„å¤šä¸ªç‰ˆæœ¬æ—¶ï¼Œä¸ç¡®å®šä½¿ç”¨çš„æ˜¯å“ªä¸ªç‰ˆæœ¬æ—¶ï¼Œè¿™ä¸ªå‘½ä»¤å°±èƒ½æ´¾ä¸Šç”¨åœºï¼›

### æ€»ç»“

```
whatis` `info` `man` `which` `whereis
```

# 1.æ–‡ä»¶åŠç›®å½•ç®¡ç†

æ–‡ä»¶ç®¡ç†ä¸å¤–ä¹æ–‡ä»¶æˆ–ç›®å½•çš„åˆ›å»ºã€åˆ é™¤ã€æŸ¥è¯¢ã€ç§»åŠ¨ï¼Œæœ‰`mkdir`/`rm`/`mv`

æ–‡ä»¶æŸ¥è¯¢æ˜¯é‡ç‚¹ï¼Œç”¨`find`æ¥è¿›è¡ŒæŸ¥è¯¢ï¼›`find`çš„å‚æ•°ä¸°å¯Œï¼Œä¹Ÿéå¸¸å¼ºå¤§ï¼›

æŸ¥çœ‹æ–‡ä»¶å†…å®¹æ˜¯ä¸ªå¤§çš„è¯é¢˜ï¼Œæ–‡æœ¬çš„å¤„ç†æœ‰å¤ªå¤šçš„å·¥å…·ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œåœ¨æœ¬ç« ä¸­åªæ˜¯ç‚¹åˆ°å³æ­¢ï¼Œåé¢ä¼šæœ‰ä¸“é—¨çš„ä¸€ç« æ¥ä»‹ç»æ–‡æœ¬çš„å¤„ç†å·¥å…·ï¼›æœ‰æ—¶å€™ï¼Œéœ€è¦ç»™æ–‡ä»¶åˆ›å»ºä¸€ä¸ªåˆ«åï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°`ln`ï¼Œä½¿ç”¨è¿™ä¸ªåˆ«åå’Œä½¿ç”¨åŸæ–‡ä»¶æ˜¯ç›¸åŒçš„æ•ˆæœï¼›

## 2.1. åˆ›å»ºå’Œåˆ é™¤

- åˆ›å»ºï¼š`mkdir`
- åˆ é™¤ï¼š`rm`
- åˆ é™¤éç©ºç›®å½•ï¼š`rm -rf file`ç›®å½•
- åˆ é™¤æ—¥å¿— `rm *log` (ç­‰ä»·: - find ./ -name â€œ*logâ€ -exec rm {} ğŸ˜‰
- ç§»åŠ¨ï¼š`mv`
- å¤åˆ¶ï¼š`cp` (å¤åˆ¶ç›®å½•ï¼š`cp -r` )
- æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ–‡ä»¶ä¸ªæ•°: `- find ./ | wc -l`
- å¤åˆ¶ç›®å½•: `- cp -r source_dir dest_dir`

## 2.2. ç›®å½•åˆ‡æ¢

- æ‰¾åˆ°æ–‡ä»¶/ç›®å½•ä½ç½®ï¼š`cd`
- åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªå·¥ä½œç›®å½•ï¼š `cd -`
- åˆ‡æ¢åˆ°homeç›®å½•ï¼š `cd or cd ~`
- æ˜¾ç¤ºå½“å‰è·¯å¾„: `pwd`
- æ›´æ”¹å½“å‰å·¥ä½œè·¯å¾„ä¸ºpath: `- cd path`

## 2.3. åˆ—å‡ºç›®å½•é¡¹

- æ˜¾ç¤ºå½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ `ls`
- æŒ‰æ—¶é—´æ’åºï¼Œä»¥åˆ—è¡¨çš„æ–¹å¼æ˜¾ç¤ºç›®å½•é¡¹ `ls -lrt`

ä»¥ä¸Šè¿™ä¸ªå‘½ä»¤ç”¨åˆ°çš„é¢‘ç‡å¦‚æ­¤ä¹‹é«˜ï¼Œä»¥è‡³äºæˆ‘ä»¬éœ€è¦ä¸ºå®ƒå»ºç«‹ä¸€ä¸ªå¿«æ·å‘½ä»¤æ–¹å¼:

åœ¨.bashrc ä¸­è®¾ç½®å‘½ä»¤åˆ«å:

```text
alias lsl='ls -lrt'
alias lm='ls -al|more'
```

è¿™æ ·ï¼Œä½¿ç”¨lslï¼Œå°±å¯ä»¥æ˜¾ç¤ºç›®å½•ä¸­çš„æ–‡ä»¶æŒ‰ç…§ä¿®æ”¹æ—¶é—´æ’åºï¼›ä»¥åˆ—è¡¨æ–¹å¼æ˜¾ç¤ºï¼›

- ç»™æ¯é¡¹æ–‡ä»¶å‰é¢å¢åŠ ä¸€ä¸ªidç¼–å·(çœ‹ä¸Šå»æ›´åŠ æ•´æ´):

```sh
>ls | cat -n

1 a
2 a.out
3 app
4 b
5 bin
6 config
```

æ³¨ï¼š.bashrc åœ¨/home/ä½ çš„ç”¨æˆ·å/ æ–‡ä»¶å¤¹ä¸‹ï¼Œä»¥éšè—æ–‡ä»¶çš„æ–¹å¼å­˜å‚¨ï¼›å¯ä½¿ç”¨ ls -a æŸ¥çœ‹ï¼›

## 2.4. æŸ¥æ‰¾ç›®å½•åŠæ–‡ä»¶ find/locate

æœå¯»æ–‡ä»¶æˆ–ç›®å½•:

```sh
- find ./ -name "core*" | xargs file
```

æŸ¥æ‰¾ç›®æ ‡æ–‡ä»¶å¤¹ä¸­æ˜¯å¦æœ‰objæ–‡ä»¶:

```sh
- find ./ -name '*.o'
```

é€’å½’å½“å‰ç›®å½•åŠå­ç›®å½•åˆ é™¤æ‰€æœ‰.oæ–‡ä»¶:

```sh
- find ./ -name "*.o" -exec rm {} \;
```

findæ˜¯å®æ—¶æŸ¥æ‰¾ï¼Œå¦‚æœéœ€è¦æ›´å¿«çš„æŸ¥è¯¢ï¼Œå¯è¯•è¯•locateï¼›locateä¼šä¸ºæ–‡ä»¶ç³»ç»Ÿå»ºç«‹ç´¢å¼•æ•°æ®åº“ï¼Œå¦‚æœæœ‰æ–‡ä»¶æ›´æ–°ï¼Œéœ€è¦å®šæœŸæ‰§è¡Œæ›´æ–°å‘½ä»¤æ¥æ›´æ–°ç´¢å¼•åº“:

```sh
- locate string
```

å¯»æ‰¾åŒ…å«æœ‰stringçš„è·¯å¾„:

```sh
- updatedb
```

ä¸findä¸åŒï¼Œlocateå¹¶ä¸æ˜¯å®æ—¶æŸ¥æ‰¾ã€‚ä½ éœ€è¦æ›´æ–°æ•°æ®åº“ï¼Œä»¥è·å¾—æœ€æ–°çš„æ–‡ä»¶ç´¢å¼•ä¿¡æ¯ã€‚

## 2.5. æŸ¥çœ‹æ–‡ä»¶å†…å®¹

æŸ¥çœ‹æ–‡ä»¶ï¼š`cat vi head tail more`

æ˜¾ç¤ºæ—¶åŒæ—¶æ˜¾ç¤ºè¡Œå·:

```sh
- cat -n
```

æŒ‰é¡µæ˜¾ç¤ºåˆ—è¡¨å†…å®¹:

```sh
- ls -al | more
```

åªçœ‹å‰10è¡Œ:

```sh
- head - 10 **
```

æ˜¾ç¤ºæ–‡ä»¶ç¬¬ä¸€è¡Œ:

```sh
- head -1 filename
```

æ˜¾ç¤ºæ–‡ä»¶å€’æ•°ç¬¬äº”è¡Œ:

```sh
- tail -5 filename
```

æŸ¥çœ‹ä¸¤ä¸ªæ–‡ä»¶é—´çš„å·®åˆ«:

```sh
- diff file1 file2
```

åŠ¨æ€æ˜¾ç¤ºæ–‡æœ¬æœ€æ–°ä¿¡æ¯:

```sh
- tail -f crawler.log
```

## 2.6. æŸ¥æ‰¾æ–‡ä»¶å†…å®¹

ä½¿ç”¨egrepæŸ¥è¯¢æ–‡ä»¶å†…å®¹:

```sh
egrep '03.1\/CO\/AE' TSF_STAT_111130.log.012
egrep 'A_LMCA777:C' TSF_STAT_111130.log.035 > co.out2
```

## 2.7. æ–‡ä»¶ä¸ç›®å½•æƒé™ä¿®æ”¹

- æ”¹å˜æ–‡ä»¶çš„æ‹¥æœ‰è€… `chown`
- æ”¹å˜æ–‡ä»¶è¯»ã€å†™ã€æ‰§è¡Œç­‰å±æ€§ `chmod`
- é€’å½’å­ç›®å½•ä¿®æ”¹ï¼š `chown -R tuxapp source/`
- å¢åŠ è„šæœ¬å¯æ‰§è¡Œæƒé™ï¼š `chmod a+x myscript`

## 2.8. ç»™æ–‡ä»¶å¢åŠ åˆ«å

åˆ›å»ºç¬¦å·é“¾æ¥/ç¡¬é“¾æ¥:

```sh
ln cc ccAgain :ç¡¬è¿æ¥ï¼›åˆ é™¤ä¸€ä¸ªï¼Œå°†ä»èƒ½æ‰¾åˆ°ï¼›
ln -s cc ccTo :ç¬¦å·é“¾æ¥(è½¯é“¾æ¥)ï¼›åˆ é™¤æºï¼Œå¦ä¸€ä¸ªæ— æ³•ä½¿ç”¨ï¼›ï¼ˆåé¢ä¸€ä¸ªccTo ä¸ºæ–°å»ºçš„æ–‡ä»¶ï¼‰
```

## 2.9. ç®¡é“å’Œé‡å®šå‘

- æ‰¹å¤„ç†å‘½ä»¤è¿æ¥æ‰§è¡Œï¼Œä½¿ç”¨ `|`
- ä¸²è”: ä½¿ç”¨åˆ†å· `;`
- å‰é¢æˆåŠŸï¼Œåˆ™æ‰§è¡Œåé¢ä¸€æ¡ï¼Œå¦åˆ™ï¼Œä¸æ‰§è¡Œ:`&&`
- å‰é¢å¤±è´¥ï¼Œåˆ™åä¸€æ¡æ‰§è¡Œ: `||`

```sh
ls /proc && echo  suss! || echo failed.
```

èƒ½å¤Ÿæç¤ºå‘½åæ˜¯å¦æ‰§è¡ŒæˆåŠŸorå¤±è´¥ï¼›

ä¸ä¸Šè¿°ç›¸åŒæ•ˆæœçš„æ˜¯:

```sh
if ls /proc; then echo suss; else echo fail; fi
```

é‡å®šå‘:

```sh
ls  proc/*.c > list 2> &l å°†æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°åŒä¸€æ–‡ä»¶ï¼›
```

ç­‰ä»·çš„æ˜¯:

```sh
ls  proc/*.c &> list
```

æ¸…ç©ºæ–‡ä»¶:

```sh
:> a.txt
```

é‡å®šå‘:

```sh
echo aa >> a.txt
```

## 2.10. è®¾ç½®ç¯å¢ƒå˜é‡

å¯åŠ¨å¸å·åè‡ªåŠ¨æ‰§è¡Œçš„æ˜¯ æ–‡ä»¶ä¸º `.profile`ï¼Œç„¶åé€šè¿‡è¿™ä¸ªæ–‡ä»¶å¯è®¾ç½®è‡ªå·±çš„ç¯å¢ƒå˜é‡ï¼›

å®‰è£…çš„è½¯ä»¶è·¯å¾„ä¸€èˆ¬éœ€è¦åŠ å…¥åˆ°pathä¸­:

```sh
PATH=- APPDIR:/opt/app/soft/bin:- PATH:/usr/local/bin:- TUXDIR/bin:- ORACLE_HOME/bin;export PATH
```

## 2.11. Bashå¿«æ·è¾“å…¥æˆ–åˆ é™¤

å¿«æ·é”®:

- `Ctl-U` åˆ é™¤å…‰æ ‡åˆ°è¡Œé¦–çš„æ‰€æœ‰å­—ç¬¦,åœ¨æŸäº›è®¾ç½®ä¸‹,åˆ é™¤å…¨è¡Œ
- `Ctl-W` åˆ é™¤å½“å‰å…‰æ ‡åˆ°å‰è¾¹çš„æœ€è¿‘ä¸€ä¸ªç©ºæ ¼ä¹‹é—´çš„å­—ç¬¦
- `Ctl-H backspace`,åˆ é™¤å…‰æ ‡å‰è¾¹çš„å­—ç¬¦
- `Ctl-R` åŒ¹é…æœ€ç›¸è¿‘çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åè¾“å‡º

## 2.12. ç»¼åˆåº”ç”¨

æŸ¥æ‰¾record.logä¸­åŒ…å«AAAï¼Œä½†ä¸åŒ…å«BBBçš„è®°å½•çš„æ€»æ•°:

```sh
cat -v record.log | grep AAA | grep -v BBB | wc -l
```

## 2.13. æ€»ç»“

æ–‡ä»¶ç®¡ç†ï¼Œç›®å½•çš„åˆ›å»ºã€åˆ é™¤ã€æŸ¥è¯¢ã€ç®¡ç†: `mkdir` `rm` `mv`

æ–‡ä»¶çš„æŸ¥è¯¢å’Œæ£€ç´¢: `find` `locate`

æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼š`cat` `vi` `tail` `more`

ç®¡é“å’Œé‡å®šå‘: `;` `|` `&&` `>`

# 3.æ–‡æœ¬å¤„ç†

æœ¬èŠ‚å°†ä»‹ç»Linuxä¸‹ä½¿ç”¨Shellå¤„ç†æ–‡æœ¬æ—¶æœ€å¸¸ç”¨çš„å·¥å…·ï¼š`find`ã€`grep`ã€`xargs`ã€`sort`ã€`uniq`ã€`tr`ã€`cut`ã€`paste`ã€`wc`ã€`sed`ã€`awk`ï¼›æä¾›çš„ä¾‹å­å’Œå‚æ•°éƒ½æ˜¯å¸¸ç”¨çš„ï¼›å¯¹shellè„šæœ¬ä½¿ç”¨çš„åŸåˆ™æ˜¯å‘½ä»¤å•è¡Œä¹¦å†™ï¼Œå°½é‡ä¸è¦è¶…è¿‡2è¡Œï¼›å¦‚æœæœ‰æ›´ä¸ºå¤æ‚çš„ä»»åŠ¡éœ€æ±‚ï¼Œè¿˜æ˜¯è€ƒè™‘pythonå§

## 3.1. find æ–‡ä»¶æŸ¥æ‰¾

æŸ¥æ‰¾txtå’Œpdfæ–‡ä»¶:

```sh
find . \( -name "*.txt" -o -name "*.pdf" \) -print
```

æ­£åˆ™æ–¹å¼æŸ¥æ‰¾.txtå’Œpdf:

```sh
find . -regex  ".*\(\.txt|\.pdf\)- "
```

-iregexï¼š å¿½ç•¥å¤§å°å†™çš„æ­£åˆ™

å¦å®šå‚æ•° ,æŸ¥æ‰¾æ‰€æœ‰étxtæ–‡æœ¬:

```sh
find . ! -name "*.txt" -print
```

æŒ‡å®šæœç´¢æ·±åº¦,æ‰“å°å‡ºå½“å‰ç›®å½•çš„æ–‡ä»¶ï¼ˆæ·±åº¦ä¸º1ï¼‰:

```sh
find . -maxdepth 1 -type f
```

### **å®šåˆ¶æœç´¢**

- æŒ‰ç±»å‹æœç´¢

```sh
find . -type d -print  //åªåˆ—å‡ºæ‰€æœ‰ç›®å½•
```

-type f æ–‡ä»¶ / l ç¬¦å·é“¾æ¥ / d ç›®å½•

findæ”¯æŒçš„æ–‡ä»¶æ£€ç´¢ç±»å‹å¯ä»¥åŒºåˆ†æ™®é€šæ–‡ä»¶å’Œç¬¦å·é“¾æ¥ã€ç›®å½•ç­‰ï¼Œä½†æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶å’Œæ–‡æœ¬æ–‡ä»¶æ— æ³•ç›´æ¥é€šè¿‡findçš„ç±»å‹åŒºåˆ†å‡ºæ¥ï¼›

fileå‘½ä»¤å¯ä»¥æ£€æŸ¥æ–‡ä»¶å…·ä½“ç±»å‹ï¼ˆäºŒè¿›åˆ¶æˆ–æ–‡æœ¬ï¼‰:

```sh
- file redis-cli  # äºŒè¿›åˆ¶æ–‡ä»¶
redis-cli: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.9, not stripped
- file redis.pid  # æ–‡æœ¬æ–‡ä»¶
redis.pid: ASCII text
```

æ‰€ä»¥,å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤ç»„åˆæ¥å®ç°æŸ¥æ‰¾æœ¬åœ°ç›®å½•ä¸‹çš„æ‰€æœ‰äºŒè¿›åˆ¶æ–‡ä»¶:

```sh
ls -lrt | awk '{print - 9}'|xargs file|grep  ELF| awk '{print - 1}'|tr -d ':'
```

- æŒ‰æ—¶é—´æœç´¢
  - `-atime` è®¿é—®æ—¶é—´ (å•ä½æ˜¯å¤©ï¼Œåˆ†é’Ÿå•ä½åˆ™æ˜¯-aminï¼Œä»¥ä¸‹ç±»ä¼¼ï¼‰
  - `-mtime` ä¿®æ”¹æ—¶é—´ ï¼ˆå†…å®¹è¢«ä¿®æ”¹ï¼‰
  - `-ctime` å˜åŒ–æ—¶é—´ ï¼ˆå…ƒæ•°æ®æˆ–æƒé™å˜åŒ–ï¼‰

æœ€è¿‘ç¬¬7å¤©è¢«è®¿é—®è¿‡çš„æ‰€æœ‰æ–‡ä»¶:

```sh
find . -atime 7 -type f -print
```

æœ€è¿‘7å¤©å†…è¢«è®¿é—®è¿‡çš„æ‰€æœ‰æ–‡ä»¶:

```sh
find . -atime -7 -type f -print
```

æŸ¥è¯¢7å¤©å‰è¢«è®¿é—®è¿‡çš„æ‰€æœ‰æ–‡ä»¶:

```sh
find . -atime +7 type f -print
```

- æŒ‰å¤§å°æœç´¢ï¼šwå­— k M Gå¯»æ‰¾å¤§äº2kçš„æ–‡ä»¶:

```sh
find . -type f -size +2k
```

æŒ‰æƒé™æŸ¥æ‰¾:

```sh
find . -type f -perm 644 -print //æ‰¾å…·æœ‰å¯æ‰§è¡Œæƒé™çš„æ‰€æœ‰æ–‡ä»¶
```

æŒ‰ç”¨æˆ·æŸ¥æ‰¾:

```sh
find . -type f -user weber -print// æ‰¾ç”¨æˆ·weberæ‰€æ‹¥æœ‰çš„æ–‡ä»¶
```

### æ‰¾åˆ°åçš„åç»­åŠ¨ä½œ

- åˆ é™¤

åˆ é™¤å½“å‰ç›®å½•ä¸‹æ‰€æœ‰çš„swpæ–‡ä»¶:

```sh
find . -type f -name "*.swp" -delete
```

å¦ä¸€ç§è¯­æ³•:

```sh
find . type f -name "*.swp" | xargs rm
```

- æ‰§è¡ŒåŠ¨ä½œï¼ˆå¼ºå¤§çš„execï¼‰

å°†å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æƒå˜æ›´ä¸ºweber:

```sh
find . -type f -user root -exec chown weber {} \;
```

æ³¨ï¼š{}æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å­—ç¬¦ä¸²ï¼Œå¯¹äºæ¯ä¸€ä¸ªåŒ¹é…çš„æ–‡ä»¶ï¼Œ{}ä¼šè¢«æ›¿æ¢æˆç›¸åº”çš„æ–‡ä»¶åï¼›

å°†æ‰¾åˆ°çš„æ–‡ä»¶å…¨éƒ½copyåˆ°å¦ä¸€ä¸ªç›®å½•:

```sh
find . -type f -mtime +10 -name "*.txt" -exec cp {} OLD \;
```

- ç»“åˆå¤šä¸ªå‘½ä»¤ å¦‚æœéœ€è¦åç»­æ‰§è¡Œå¤šä¸ªå‘½ä»¤ï¼Œå¯ä»¥å°†å¤šä¸ªå‘½ä»¤å†™æˆä¸€ä¸ªè„šæœ¬ã€‚ç„¶å -exec è°ƒç”¨æ—¶æ‰§è¡Œè„šæœ¬å³å¯:

```sh
-exec ./commands.sh {} \;
```

### -printçš„å®šç•Œç¬¦

é»˜è®¤ä½¿ç”¨â€™\nâ€™ä½œä¸ºæ–‡ä»¶çš„å®šç•Œç¬¦ï¼›

-print0 ä½¿ç”¨â€™\0â€™ä½œä¸ºæ–‡ä»¶çš„å®šç•Œç¬¦ï¼Œè¿™æ ·å°±å¯ä»¥æœç´¢åŒ…å«ç©ºæ ¼çš„æ–‡ä»¶ï¼›

## 3.2. grep æ–‡æœ¬æœç´¢

```sh
grep match_patten file // é»˜è®¤è®¿é—®åŒ¹é…è¡Œ
```

å¸¸ç”¨å‚æ•°

- -o åªè¾“å‡ºåŒ¹é…çš„æ–‡æœ¬è¡Œ **VS** -v åªè¾“å‡ºæ²¡æœ‰åŒ¹é…çš„æ–‡æœ¬è¡Œ
- -c ç»Ÿè®¡æ–‡ä»¶ä¸­åŒ…å«æ–‡æœ¬çš„æ¬¡æ•°grep -c â€œtextâ€ filename
- -n æ‰“å°åŒ¹é…çš„è¡Œå·
- -i æœç´¢æ—¶å¿½ç•¥å¤§å°å†™
- -l åªæ‰“å°æ–‡ä»¶å åœ¨å¤šçº§ç›®å½•ä¸­å¯¹æ–‡æœ¬é€’å½’æœç´¢(ç¨‹åºå‘˜æœä»£ç çš„æœ€çˆ±ï¼‰:

```sh
grep "class" . -R -n
```

åŒ¹é…å¤šä¸ªæ¨¡å¼:

```sh
grep -e "class" -e "vitural" file
```

grepè¾“å‡ºä»¥0ä½œä¸ºç»“å°¾ç¬¦çš„æ–‡ä»¶åï¼ˆ-zï¼‰:

```sh
grep "test" file* -lZ| xargs -0 rm
```

ç»¼åˆåº”ç”¨ï¼šå°†æ—¥å¿—ä¸­çš„æ‰€æœ‰å¸¦whereæ¡ä»¶çš„sqlæŸ¥æ‰¾æŸ¥æ‰¾å‡ºæ¥:

```sh
cat LOG.* | tr a-z A-Z | grep "FROM " | grep "WHERE" > b
```

æŸ¥æ‰¾ä¸­æ–‡ç¤ºä¾‹ï¼šå·¥ç¨‹ç›®å½•ä¸­utf-8æ ¼å¼å’Œgb2312æ ¼å¼ä¸¤ç§æ–‡ä»¶ï¼Œè¦æŸ¥æ‰¾å­—çš„æ˜¯ä¸­æ–‡ï¼›

1. - æŸ¥æ‰¾åˆ°å®ƒçš„utf-8ç¼–ç å’Œgb2312ç¼–ç åˆ†åˆ«æ˜¯E4B8ADE69687å’ŒD6D0CEC4
2. - æŸ¥è¯¢: `grepï¼šgrep -rnP "\xE4\xB8\xAD\xE6\x96\x87|\xD6\xD0\xCE\xC4" *`å³å¯
3. æ±‰å­—ç¼–ç æŸ¥è¯¢ï¼šhttp://bm.kdd.cc/

## 3.3. xargs å‘½ä»¤è¡Œå‚æ•°è½¬

xargs èƒ½å¤Ÿå°†è¾“å…¥æ•°æ®è½¬åŒ–ä¸ºç‰¹å®šå‘½ä»¤çš„å‘½ä»¤è¡Œå‚æ•°ï¼›è¿™æ ·ï¼Œå¯ä»¥é…åˆå¾ˆå¤šå‘½ä»¤æ¥ç»„åˆä½¿ç”¨ã€‚æ¯”å¦‚grepï¼Œæ¯”å¦‚findï¼›- å°†å¤šè¡Œè¾“å‡ºè½¬åŒ–ä¸ºå•è¡Œè¾“å‡º

```sh
cat file.txt| xargs
```

n æ˜¯å¤šè¡Œæ–‡æœ¬é—´çš„å®šç•Œç¬¦

- å°†å•è¡Œè½¬åŒ–ä¸ºå¤šè¡Œè¾“å‡º

```sh
cat single.txt | xargs -n 3
```

-nï¼šæŒ‡å®šæ¯è¡Œæ˜¾ç¤ºçš„å­—æ®µæ•°

xargså‚æ•°è¯´æ˜

- `-d`å®šä¹‰å®šç•Œç¬¦ ï¼ˆé»˜è®¤ä¸ºç©ºæ ¼ å¤šè¡Œçš„å®šç•Œç¬¦ä¸º nï¼‰
- `-n`æŒ‡å®šè¾“å‡ºä¸ºå¤šè¡Œ
- `-I {}` æŒ‡å®šæ›¿æ¢å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²åœ¨xargsæ‰©å±•æ—¶ä¼šè¢«æ›¿æ¢æ‰,ç”¨äºå¾…æ‰§è¡Œçš„å‘½ä»¤éœ€è¦å¤šä¸ªå‚æ•°æ—¶
- `-0ï¼š`æŒ‡å®š0ä¸ºè¾“å…¥å®šç•Œç¬¦ ç¤ºä¾‹:

```sh
cat file.txt | xargs -I {} ./command.sh -p {} -1
 
#ç»Ÿè®¡ç¨‹åºè¡Œæ•°
find source_dir/ -type f -name "*.cpp" -print0 |xargs -0 wc -l
 
#redisé€šè¿‡stringå­˜å‚¨æ•°æ®ï¼Œé€šè¿‡setå­˜å‚¨ç´¢å¼•ï¼Œéœ€è¦é€šè¿‡ç´¢å¼•æ¥æŸ¥è¯¢å‡ºæ‰€æœ‰çš„å€¼ï¼š
./redis-cli smembers - 1  | awk '{print - 1}'|xargs -I {} ./redis-cli get {}
```

## 3.4. sort æ’åº

å­—æ®µè¯´æ˜

- `-n`æŒ‰æ•°å­—è¿›è¡Œæ’åº VS `-d` æŒ‰å­—å…¸åºè¿›è¡Œæ’åº
- `-r` é€†åºæ’åº
- `-k N` æŒ‡å®šæŒ‰ç¬¬Nåˆ—æ’åº

ç¤ºä¾‹:

```sh
sort -nrk 1 data.txtsort -bd data // å¿½ç•¥åƒç©ºæ ¼ä¹‹ç±»çš„å‰å¯¼ç©ºç™½å­—ç¬¦
```

## 3.5. uniq æ¶ˆé™¤é‡å¤è¡Œ

- æ¶ˆé™¤é‡å¤è¡Œ

```sh
sort unsort.txt | uniq
```

- ç»Ÿè®¡å„è¡Œåœ¨æ–‡ä»¶ä¸­å‡ºç°çš„æ¬¡æ•°

```sh
sort unsort.txt | uniq -c
```

- æ‰¾å‡ºé‡å¤è¡Œ

```sh
sort unsort.txt | uniq -d
```

å¯æŒ‡å®šæ¯è¡Œä¸­éœ€è¦æ¯”è¾ƒçš„é‡å¤å†…å®¹ï¼š-s å¼€å§‹ä½ç½® -w æ¯”è¾ƒå­—ç¬¦æ•°

## 3.6. ç”¨trè¿›è¡Œè½¬æ¢

- é€šç”¨ç”¨æ³•

```sh
echo 12345 | tr '0-9' '9876543210' //åŠ è§£å¯†è½¬æ¢ï¼Œæ›¿æ¢å¯¹åº”å­—ç¬¦
cat text| tr '\t' ' '  //åˆ¶è¡¨ç¬¦è½¬ç©ºæ ¼
```

- tråˆ é™¤å­—ç¬¦

```sh
cat file | tr -d '0-9' // åˆ é™¤æ‰€æœ‰æ•°å­—
```

-c æ±‚è¡¥é›†

```sh
cat file | tr -c '0-9' //è·å–æ–‡ä»¶ä¸­æ‰€æœ‰æ•°å­—
cat file | tr -d -c '0-9 \n'  //åˆ é™¤éæ•°å­—æ•°æ®
```

- `tr`å‹ç¼©å­—ç¬¦

  `tr -s` å‹ç¼©æ–‡æœ¬ä¸­å‡ºç°çš„é‡å¤å­—ç¬¦ï¼›æœ€å¸¸ç”¨äºå‹ç¼©å¤šä½™çš„ç©ºæ ¼:

```sh
cat file | tr -s ' '
```

- å­—ç¬¦ç±»

  **trä¸­å¯ç”¨å„ç§å­—ç¬¦ç±»ï¼š**

  - alnumï¼šå­—æ¯å’Œæ•°å­—
  - alphaï¼šå­—æ¯
  - digitï¼šæ•°å­—
  - spaceï¼šç©ºç™½å­—ç¬¦
  - lowerï¼šå°å†™
  - upperï¼šå¤§å†™
  - cntrlï¼šæ§åˆ¶ï¼ˆéå¯æ‰“å°ï¼‰å­—ç¬¦
  - printï¼šå¯æ‰“å°å­—ç¬¦

ä½¿ç”¨æ–¹æ³•ï¼š`tr [:class:] [:class:]`

```sh
tr '[:lower:]' '[:upper:]'
```

## 3.7. cut æŒ‰åˆ—åˆ‡åˆ†æ–‡æœ¬

- æˆªå–æ–‡ä»¶çš„ç¬¬2åˆ—å’Œç¬¬4åˆ—

```sh
cut -f2,4 filename
```

- å»æ–‡ä»¶é™¤ç¬¬3åˆ—çš„æ‰€æœ‰åˆ—

```sh
cut -f3 --complement filename
```

- -d æŒ‡å®šå®šç•Œç¬¦

```sh
cat -f2 -d";" filename
```

- cut å–çš„èŒƒå›´
  - N- ç¬¬Nä¸ªå­—æ®µåˆ°ç»“å°¾
  - -M ç¬¬1ä¸ªå­—æ®µä¸ºM
  - N-M Nåˆ°Mä¸ªå­—æ®µ
- cut å–çš„å•ä½
  - -b ä»¥å­—èŠ‚ä¸ºå•ä½
  - -c ä»¥å­—ç¬¦ä¸ºå•ä½
  - -f ä»¥å­—æ®µä¸ºå•ä½ï¼ˆä½¿ç”¨å®šç•Œç¬¦ï¼‰ ç¤ºä¾‹:

```sh
cut -c1-5 file //æ‰“å°ç¬¬ä¸€åˆ°5ä¸ªå­—ç¬¦
cut -c-2 file  //æ‰“å°å‰2ä¸ªå­—ç¬¦
```

æˆªå–æ–‡æœ¬çš„ç¬¬5åˆ°ç¬¬7åˆ—

```text
- echo string | cut -c5-7
```

## 3.8. paste æŒ‰åˆ—æ‹¼æ¥æ–‡æœ¬

å°†ä¸¤ä¸ªæ–‡æœ¬æŒ‰åˆ—æ‹¼æ¥åˆ°ä¸€èµ·;

```sh
cat file1
1
2
 
cat file2
colin
book
 
paste file1 file2
1 colin
2 book
```

é»˜è®¤çš„å®šç•Œç¬¦æ˜¯åˆ¶è¡¨ç¬¦ï¼Œå¯ä»¥ç”¨-dæŒ‡æ˜å®šç•Œç¬¦:

```sh
paste file1 file2 -d ","
1,colin
2,book
```

## 3.9. wc ç»Ÿè®¡è¡Œå’Œå­—ç¬¦çš„å·¥å…·

```sh
- wc -l file // ç»Ÿè®¡è¡Œæ•°
 
- wc -w file // ç»Ÿè®¡å•è¯æ•°
 
- wc -c file // ç»Ÿè®¡å­—ç¬¦æ•°
```

## 3.10. sed æ–‡æœ¬æ›¿æ¢åˆ©å™¨

- é¦–å¤„æ›¿æ¢

```sh
sed 's/text/replace_text/' file   //æ›¿æ¢æ¯ä¸€è¡Œçš„ç¬¬ä¸€å¤„åŒ¹é…çš„text
```

- å…¨å±€æ›¿æ¢

```sh
sed 's/text/replace_text/g' file
```

é»˜è®¤æ›¿æ¢åï¼Œè¾“å‡ºæ›¿æ¢åçš„å†…å®¹ï¼Œå¦‚æœéœ€è¦ç›´æ¥æ›¿æ¢åŸæ–‡ä»¶,ä½¿ç”¨-i:

```sh
sed -i 's/text/repalce_text/g' file
```

- ç§»é™¤ç©ºç™½è¡Œ

```sh
sed '/^- /d' file
```

- å˜é‡è½¬æ¢

å·²åŒ¹é…çš„å­—ç¬¦ä¸²é€šè¿‡æ ‡è®°&æ¥å¼•ç”¨.

```sh
echo this is en example | sed 's/\w+/[&]/g'- >[this]  [is] [en] [example]
```

- å­ä¸²åŒ¹é…æ ‡è®°

  ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ‹¬å·å†…å®¹ä½¿ç”¨æ ‡è®° 1 æ¥å¼•ç”¨

```sh
sed 's/hello\([0-9]\)/\1/'
```

- åŒå¼•å·æ±‚å€¼

  sedé€šå¸¸ç”¨å•å¼•å·æ¥å¼•ç”¨ï¼›ä¹Ÿå¯ä½¿ç”¨åŒå¼•å·ï¼Œä½¿ç”¨åŒå¼•å·åï¼ŒåŒå¼•å·ä¼šå¯¹è¡¨è¾¾å¼æ±‚å€¼:

```sh
sed 's/- var/HLLOE/'
```

å½“ä½¿ç”¨åŒå¼•å·æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨sedæ ·å¼å’Œæ›¿æ¢å­—ç¬¦ä¸²ä¸­æŒ‡å®šå˜é‡ï¼›

```sh
eg:
p=patten
r=replaced
echo "line con a patten" | sed "s/- p/- r/g"
- >line con a replaced
```

- å…¶å®ƒç¤ºä¾‹

  å­—ç¬¦ä¸²æ’å…¥å­—ç¬¦ï¼šå°†æ–‡æœ¬ä¸­æ¯è¡Œå†…å®¹ï¼ˆABCDEFï¼‰ è½¬æ¢ä¸º ABC/DEF:

```sh
sed 's/^.\{3\}/&\//g' file
```

## 3.11. awk æ•°æ®æµå¤„ç†å·¥å…·

- awkè„šæœ¬ç»“æ„

```sh
awk ' BEGIN{ statements } statements2 END{ statements } '
```

- å·¥ä½œæ–¹å¼
  - 1.æ‰§è¡Œbeginä¸­è¯­å¥å—ï¼›
  - 2.ä»æ–‡ä»¶æˆ–stdinä¸­è¯»å…¥ä¸€è¡Œï¼Œç„¶åæ‰§è¡Œstatements2ï¼Œé‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ–‡ä»¶å…¨éƒ¨è¢«è¯»å–å®Œæ¯•ï¼›
  - 3.æ‰§è¡Œendè¯­å¥å—ï¼›

### print æ‰“å°å½“å‰è¡Œ

- ä½¿ç”¨ä¸å¸¦å‚æ•°çš„printæ—¶ï¼Œä¼šæ‰“å°å½“å‰è¡Œ

```text
echo -e "line1\nline2" | awk 'BEGIN{print "start"} {print } END{ print "End" }'
```

- print ä»¥é€—å·åˆ†å‰²æ—¶ï¼Œå‚æ•°ä»¥ç©ºæ ¼å®šç•Œ;

```sh
echo | awk ' {var1 = "v1" ; var2 = "V2"; var3="v3"; \
print var1, var2 , var3; }'
- >v1 V2 v3
```

- ä½¿ç”¨-æ‹¼æ¥ç¬¦çš„æ–¹å¼ï¼ˆâ€â€œä½œä¸ºæ‹¼æ¥ç¬¦ï¼‰;

```sh
echo | awk ' {var1 = "v1" ; var2 = "V2"; var3="v3"; \
print var1"-"var2"-"var3; }'
- >v1-V2-v3
```

### **ç‰¹æ®Šå˜é‡ï¼š NR NF - 0 - 1 - 2**

NR:è¡¨ç¤ºè®°å½•æ•°é‡ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¯¹åº”å½“å‰è¡Œå·ï¼›

NF:è¡¨ç¤ºå­—æ®µæ•°é‡ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹æ€»å¯¹åº”å½“å‰è¡Œçš„å­—æ®µæ•°ï¼›

- 0:è¿™ä¸ªå˜é‡åŒ…å«æ‰§è¡Œè¿‡ç¨‹ä¸­å½“å‰è¡Œçš„æ–‡æœ¬å†…å®¹ï¼›
- 1:ç¬¬ä¸€ä¸ªå­—æ®µçš„æ–‡æœ¬å†…å®¹ï¼›
- 2:ç¬¬äºŒä¸ªå­—æ®µçš„æ–‡æœ¬å†…å®¹ï¼›

```sh
echo -e "line1 f2 f3\n line2 \n line 3" | awk '{print NR":"- 0"-"- 1"-"- 2}'
```

- æ‰“å°æ¯ä¸€è¡Œçš„ç¬¬äºŒå’Œç¬¬ä¸‰ä¸ªå­—æ®µ

```sh
awk '{print - 2, - 3}' file
```

- ç»Ÿè®¡æ–‡ä»¶çš„è¡Œæ•°

```sh
awk ' END {print NR}' file
```

- ç´¯åŠ æ¯ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—æ®µ

```sh
echo -e "1\n 2\n 3\n 4\n" | awk 'BEGIN{num = 0 ;
print "begin";} {sum += - 1;} END {print "=="; print sum }'
```

### ä¼ é€’å¤–éƒ¨å˜é‡

```sh
var=1000
echo | awk '{print vara}' vara=- var #  è¾“å…¥æ¥è‡ªstdin
awk '{print vara}' vara=- var file # è¾“å…¥æ¥è‡ªæ–‡ä»¶
```

### ç”¨æ ·å¼å¯¹awkå¤„ç†çš„è¡Œè¿›è¡Œè¿‡æ»¤

```sh
awk 'NR < 5' #è¡Œå·å°äº5
awk 'NR==1,NR==4 {print}' file #è¡Œå·ç­‰äº1å’Œ4çš„æ‰“å°å‡ºæ¥
awk '/linux/' #åŒ…å«linuxæ–‡æœ¬çš„è¡Œï¼ˆå¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥æŒ‡å®šï¼Œè¶…çº§å¼ºå¤§ï¼‰
awk '!/linux/' #ä¸åŒ…å«linuxæ–‡æœ¬çš„è¡Œ
```

### è®¾ç½®å®šç•Œç¬¦

ä½¿ç”¨-Fæ¥è®¾ç½®å®šç•Œç¬¦ï¼ˆé»˜è®¤ä¸ºç©ºæ ¼ï¼‰:

```sh
awk -F: '{print - NF}' /etc/passwd
```

### è¯»å–å‘½ä»¤è¾“å‡º

ä½¿ç”¨getlineï¼Œå°†å¤–éƒ¨shellå‘½ä»¤çš„è¾“å‡ºè¯»å…¥åˆ°å˜é‡cmdoutä¸­:

```sh
echo | awk '{"grep root /etc/passwd" | getline cmdout; print cmdout }'
```

### åœ¨awkä¸­ä½¿ç”¨å¾ªç¯

```text
for(i=0;i<10;i++){print - i;}
for(i in array){print array[i];}
```

eg:ä»¥ä¸‹å­—ç¬¦ä¸²ï¼Œæ‰“å°å‡ºå…¶ä¸­çš„æ—¶é—´ä¸²:

```sh
20225_04_02 20:20:08: mysqli connect failed, please check connect info
- echo '2015_04_02 20:20:08: mysqli connect failed, please check connect info'|awk -F ":" '{ for(i=1;i<=;i++) printf("%s:",- i)}'
>2022_04_02 20:20:08:  # è¿™ç§æ–¹å¼ä¼šå°†æœ€åä¸€ä¸ªå†’å·æ‰“å°å‡ºæ¥
- echo '2022_04_02 20:20:08: mysqli connect failed, please check connect info'|awk -F':' '{print - 1 ":" - 2 ":" - 3; }'
>2022_04_02 20:20:08   # è¿™ç§æ–¹å¼æ»¡è¶³éœ€æ±‚
```

è€Œå¦‚æœéœ€è¦å°†åé¢çš„éƒ¨åˆ†ä¹Ÿæ‰“å°å‡ºæ¥(æ—¶é—´éƒ¨åˆ†å’Œåæ–‡åˆ†å¼€æ‰“å°):

```sh
- echo '2022_04_02 20:20:08: mysqli connect failed, please check connect info'|awk -F':' '{print - 1 ":" - 2 ":" - 3; print - 4;}'
>2022_04_02 20:20:08
>mysqli connect failed, please check connect info
```

ä»¥é€†åºçš„å½¢å¼æ‰“å°è¡Œï¼š(tacå‘½ä»¤çš„å®ç°ï¼‰:

```sh
seq 9| \
awk '{lifo[NR] = - 0; lno=NR} \
END{ for(;lno>-1;lno--){print lifo[lno];}
} '
```

### awkç»“åˆgrepæ‰¾åˆ°æŒ‡å®šçš„æœåŠ¡ï¼Œç„¶åå°†å…¶killæ‰

```text
ps -fe| grep msv8 | grep -v MFORWARD | awk '{print - 2}' | xargs kill -9;
```

### awkå®ç°headã€tailå‘½ä»¤

- head

```sh
awk 'NR<=10{print}' filename
```

- tail

```sh
awk '{buffer[NR%10] = - 0;} END{for(i=0;i<11;i++){ \
print buffer[i %10]} } ' filename
```

### æ‰“å°æŒ‡å®šåˆ—

- awkæ–¹å¼å®ç°

```sh
ls -lrt | awk '{print - 6}'
```

- cutæ–¹å¼å®ç°

```sh
ls -lrt | cut -f6
```

### æ‰“å°æŒ‡å®šæ–‡æœ¬åŒºåŸŸ

- ç¡®å®šè¡Œå·

```sh
seq 100| awk 'NR==4,NR==6{print}'
```

- ç¡®å®šæ–‡æœ¬ æ‰“å°å¤„äºstart_pattern å’Œend_patternä¹‹é—´çš„æ–‡æœ¬:

```sh
awk '/start_pattern/, /end_pattern/' filename
```

ç¤ºä¾‹:

```sh
seq 100 | awk '/13/,/15/'cat /etc/passwd| awk '/mai.*mail/,/news.*news/'
```

### awkå¸¸ç”¨å†…å»ºå‡½æ•°

`index(string,search_string)` : è¿”å›search_stringåœ¨stringä¸­å‡ºç°çš„ä½ç½®

`sub(regex,replacement_str,string)` : å°†æ­£åˆ™åŒ¹é…åˆ°çš„ç¬¬ä¸€å¤„å†…å®¹æ›¿æ¢ä¸ºreplacement_str;

`match(regex,string)` : æ£€æŸ¥æ­£åˆ™è¡¨è¾¾å¼æ˜¯å¦èƒ½å¤ŸåŒ¹é…å­—ç¬¦ä¸²ï¼›

`length(string)`ï¼šè¿”å›å­—ç¬¦ä¸²é•¿åº¦

```sh
echo | awk '{"grep root /etc/passwd" | getline cmdout; print length(cmdout) }'
```

printf ç±»ä¼¼cè¯­è¨€ä¸­çš„printfï¼Œå¯¹è¾“å‡ºè¿›è¡Œæ ¼å¼åŒ–:

```sh
seq 10 | awk '{printf "->%4s\n", - 1}'
```

## 3.12. è¿­ä»£æ–‡ä»¶ä¸­çš„è¡Œã€å•è¯å’Œå­—ç¬¦

### 1. è¿­ä»£æ–‡ä»¶ä¸­çš„æ¯ä¸€è¡Œ

- while å¾ªç¯æ³•

```sh
while read line;
do
echo - line;
done < file.txt
 
æ”¹æˆå­shell:
cat file.txt | (while read line;do echo - line;done)
```

- awkæ³•

```sh
cat file.txt| awk '{print}'
```

### 2.è¿­ä»£ä¸€è¡Œä¸­çš„æ¯ä¸€ä¸ªå•è¯

```sh
for word in - line;
do
echo - word;
done
```

### 3. è¿­ä»£æ¯ä¸€ä¸ªå­—ç¬¦

- `{string:start_pos:num_of_chars}` ï¼šä»å­—ç¬¦ä¸²ä¸­æå–ä¸€ä¸ªå­—ç¬¦ï¼›(bashæ–‡æœ¬åˆ‡ç‰‡ï¼‰
- `{#word}`: è¿”å›å˜é‡wordçš„é•¿åº¦

```sh
for((i=0;i<- {#word};i++))
do
echo - {word:i:1);
done
```

ä»¥ASCIIå­—ç¬¦æ˜¾ç¤ºæ–‡ä»¶:

```sh
 å¤åˆ¶ä»£ç - od -c filename
```

